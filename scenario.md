# 題目一

試想臨時有一活動網頁專案將於近日推出，預期推廣期間訪客流量會是平日常態之百倍(或更多)，請簡易描述你/妳將如何確保服務能在推廣期間正常運作？考量的細節是什麼？

## 1. 資源擴展與容錯設計
- **水平擴展**：確保系統架構能夠根據流量需求動態擴展。
- **負載均衡**：配置負載均衡器，確保流量能夠均勻分配到各Server，避免單台Server過載。

## 2. 性能測試與壓力測試
- **負載測試**：進行負載測試，模擬高流量的情況。
- **資源瓶頸檢測**：測試過程中重點檢查 **cpu**、**memory**、**disk** 及 **network bandwidth** 的使用情況，確保在高流量下不會出現瓶頸。

## 3. 監控與預警系統
- **監控**：確保監控系統運作正常，能夠看到基本 metrics（如： **cpu**、**memory**、**disk**使用情況等）。
- **設置警報**：為各項關鍵指標設置預警，當指標達到閾值時，能夠立即通知相關人員，並迅速處理問題。

## 4. 優化網頁效能
- **快取機制**：對靜態資源（如圖片、CSS、JS）進行 **CDN 快取**，減少伺服器負擔，提高頁面加載速度。

## 5. 彈性設計與高可用性
- **多區域部署**：確保系統能夠跨區域運行。
- **自動化故障轉移**：設置自動化故障轉移機制，當某一伺服器或服務故障時，能夠自動切換到備援服務，保證業務連續性。

## 6. 事先準備與人員支援
- **資源準備**：確保在推廣期間有足夠的技術人員準備，並建立應急處置計劃。
- **故障應急演練**：在推廣前進行應急演練，確保技術團隊熟悉故障處理流程。

## 7. 內容交付與服務器監控
- **CDN 配置**：利用 CDN 優化內容交付速度，減少伺服器負擔並提升用戶體驗。
- **服務器狀態監控**：實時監控伺服器狀態，尤其是健康檢查，確保異常伺服器能迅速被隔離。

---

# 題目二

試想有一個 API 伺服器集群，背後由多台機器組成，此時服務監控系統發現其中一台回應時間經常逾時，僅有此機器異常，請簡易描述你/妳將會如何進行問題排查？考量的細節是什麼？

## 1. 將異常機器移出集群
- 在正式環境中，為避免影響使用者體驗，首先將異常機器移出集群，確保流量不再通過這台伺服器，避免對服務造成進一步的影響。

## 2. 檢查負載均衡配置(load balancing setting check)
- **負載均衡算法**：檢查負載均衡器配置的算法（如 `round-robin` 或 `least connections` 等），確保流量能夠均勻分配。如果配置錯誤，可能會導致部分伺服器承載過多流量，造成性能瓶頸。
- **健康檢查機制**：確認負載均衡器的健康檢查配置是否正確。如果負載均衡器未能正確識別伺服器狀態，可能會導致異常流量分配。
- **流量權重配置**：如果使用了權重分配流量，確保配置的權重合理，避免某台伺服器負擔過重。

## 3. 檢查伺服器健康狀態與資源使用情況
- 檢查該機器的 **CPU**、**Memory**、**Disk使用情況** 是否異常，確認是否有資源瓶頸。
- 檢查該機器是否存在 **網路延遲** 或 **丟包** 等問題，這些也可能導致回應延遲。

## 4. 檢查日誌與錯誤訊息
- 查看 **應用程式日誌**，特別是服務啟動或錯誤相關的記錄，看看是否有明顯的錯誤或異常行為。
- 檢查 **系統日誌**，排查是否有硬體故障或系統層級的錯誤。

## 5. 與正常機器進行比較
- 檢查異常伺服器與正常伺服器之間的配置差異（如版本、配置等），確認是否有任何配置錯誤或不一致。

## 6. 檢查 Session Stickiness 設置
- 如果開啟了 **session stickiness**，確認配置是否合理。過度依賴會話黏性可能會將大量流量集中在某一台伺服器上，導致其負載過重。

---

# 題目三

試想有一項目運行於 AWS EC2 機器之上，已確認該服務仍然正常運行中，但由於不明原因導致無法再次透過 SSH 登入確認狀態（已確認排除並非網路異常，亦非防火牆阻擋所導致）。請簡易描述你/妳將如何排查問題，並且讓服務恢復正常運作？考量的細節是什麼？如果可以，請試著回答造成無法登入的可能的肇因為何？

## 排查步驟：
1. **檢查 Security Group 規則**：確保 22 端口對當前的 IP 開放。
2. **查看實例的系統日誌**：確認 SSH 服務是否正常啟動。
3. **確認 SSH 密鑰和用戶名是否正確**：檢查密鑰是否對應、用戶名是否正確。
4. **嘗試使用 EC2 Instance Connect**：直接連接 EC2。

## 無法登入的可能原因：
1. **Security Group 配置變更**：可能改動了安全組規則，導致無法進行 SSH 連接。
2. **SSH 服務未啟動**：該服務未能啟動或崩潰，導致無法進行遠程連接。
3. **錯誤的 SSH 密鑰或用戶名**：配置錯誤可能阻止正常登錄。
4. **使用 EC2 Instance Connect**：如果其他方式無法登入，可嘗試透過 EC2 Instance Connect 進行連接。

---

# 題目四

試想已有一組 ELK/EFK 日誌服務集群，而今日有一新服務上線並且串接日誌紀錄，讓開發者能夠透過 Kibana 進行線上錯誤排查，你/妳會如何將日誌檔內容串接至 ELK/EFK 系統?考量的細節是什麼？

## 1. 資料傳輸模式
- 首先，我會判斷資料應該使用 **推送（push）** 還是 **輪詢（pull）** 的方式來傳送到 Logstash。
  - 若新服務能夠主動推送資料，則選擇推送方式。
  - 若服務無法主動推送，則使用輪詢方式來定期檢查資料源。

## 2. 資料重要性及資料丟失的承受範圍
- 我會評估日誌資料的重要性。
  - 若資料是極為關鍵且無法承受丟失的，我會在 Logstash 前端加入佇列（例如使用 Kafka），確保即使 Logstash 或 Elasticsearch 發生問題，資料仍能暫時保留在佇列中，避免丟失。

## 3. 日誌資料處理
- 在 Logstash 處理階段，我會過濾掉不必要的資料，並對資料進行 **data enrich**，以確保送入 Elasticsearch 的資料是最精簡的。
  - 這樣不僅能避免浪費存儲空間，也能提高查詢效率，減少不必要的花費。

## 4. 資源與費用考量
- 我會設置適當的 **Index Lifecycle Policy（ILM）**，將較舊且不常使用的資料轉移到 **Cold Phase**，從而節省存儲成本。
  - 這不僅有助於降低運行費用，還能確保系統的運行效率，避免無用資料佔用過多資源。
